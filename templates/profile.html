{% extends 'base.html' %}

{% block title %}Kdrama Review App{% endblock %}



{% block css %}
<link href="/static/css/playlists.css" rel="stylesheet">
{% endblock %}


{% block js %}
<script src="/static/js/userPlaylists.jsx" type="text/jsx"></script>
<script src="/static/js/reviews.jsx" type="text/jsx"></script>
{% endblock %}

{% block data_attributes %}
<meta id='data' data-api_key={{api_key}}
                data-user={{user.user_id}}
                data-user_id={{user.user_id}}
                data-review_api_url='/reviews?user_id={{user.user_id}}'>
{% endblock %}

{% if session.get('user_id') == user.user_id %}
{% set active_page = 'account' -%}
{% endif %}

{% block body %}

<div>
   {% if user %}
      <div class='avatar lg'><img id='avatar-img' src={{user.image_path}}/></div>
      <h2>{{user.fname}} {{user.lname}}</h2>
      <h3>{{user.username}}</h3>
      <h3>{{user.email}}</h3>
      <h3>Favorite genre: {{fav_genre}}</h3>

      {%if edit%}
         <h3>Your Playlists</h3>
      {% else %}
         <h3>{{user.username}}'s Playlists</h3>
      {%endif%}
      <div id='user_playlists' class='flex-container'></div>

      {%if edit%}
         <h3>Your Followed Lists</h3>
      {% else %}
         <h3>{{user.username}}'s Followed List</h3>
      {%endif%}
      <div id='followed_playlists' class='flex-container'></div>

      {%if edit%}
         <h3>Your Reviews</h3>
      {% else %}
         <h3>{{user.username}}'s Reviews</h3>
      {%endif%}
      <div class='reviews flex-container'>
      </div>
  
      <!-- {%for review in user.reviews%}
      <div>
         <a href='/kdrama/{{review.kdrama.kdrama_id}}'>
         <img style="height:200px;" src='https://image.tmdb.org/t/p/original{{review.kdrama.poster_path}}' alt='Kdrama Poster' />
         </a>
         <h4>{{review.kdrama.title}}</h4>
         <p>Rating: {{review.rating}}</p>
         {% if review.content != '0' and review.content != ''%}
         <p>Content: {{review.content}}</p>
         {% endif %}
      </div>
      {%endfor%} -->

   {% endif %}
</div>

{% endblock %}